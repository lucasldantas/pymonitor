<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor de Sa√∫de de Dispositivos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* Insira o c√≥digo CSS fornecido no Bloco 2 aqui */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }
        .dark-mode {
            background-color: #1e1e1e;
            color: #f0f0f0;
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .card {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        .dark-mode .card {
            background-color: #2c2c2c;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        h2 {
            margin-top: 0;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
            color: #007bff;
        }
        .dark-mode h2 {
            color: #4CAF50;
            border-bottom-color: #444;
        }

        /* --- Estilo do Filtro e Status --- */
        .filters-grid {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 15px;
            align-items: center;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        input[type="date"], input[type="time"], .dropdown-toggle, .btn {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1em;
            background-color: #f9f9f9;
            color: #333;
            transition: background-color 0.3s, border-color 0.3s;
        }
        .dark-mode input[type="date"], .dark-mode input[type="time"], .dark-mode .dropdown-toggle {
            background-color: #3e3e3e;
            border-color: #555;
            color: #f0f0f0;
        }
        .btn {
            cursor: pointer;
            border: none;
            color: white;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .btn-primary {
            background-color: #007bff;
        }
        .btn-primary:hover {
            background-color: #0056b3;
        }

        /* --- Status --- */
        #statusContainer {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        #statusIcon {
            font-size: 1.2em;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .loading { background-color: #e2e3e5; color: #383d41; }
        .dark-mode .success { background-color: #3c5440; color: #7ab382; }
        .dark-mode .error { background-color: #6e3d3f; color: #c47c7c; }
        .dark-mode .loading { background-color: #383d41; color: #9da0a4; }

        /* --- Toggle Tema Escuro --- */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- ESTILOS DO NOVO DROPDOWN DE HOSTNAME (SELE√á√ÉO M√öLTIPLA) --- */
        .hostname-filter-group {
            grid-column: 2 / 3; /* Ocupa a segunda coluna do grid */
            align-self: start;
        }
        .custom-dropdown-container {
            position: relative;
            display: inline-block;
            width: 100%; /* Ocupa a largura total da coluna */
        }
        .dropdown-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            text-align: left;
            cursor: pointer;
            min-width: 150px;
        }
        .dropdown-arrow {
            transition: transform 0.3s;
        }
        .dropdown-toggle[aria-expanded="true"] .dropdown-arrow {
            transform: rotate(180deg);
        }
        .dropdown-menu {
            position: absolute;
            z-index: 1000;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #fff;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-height: 250px;
            overflow-y: auto;
            display: none;
            padding: 5px 0;
            min-width: 250px; /* Garante que n√£o fique muito estreito */
        }
        .dark-mode .dropdown-menu {
            background-color: #3e3e3e;
            border-color: #555;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .dropdown-menu.show {
            display: block;
        }
        .filter-option {
            padding: 8px 15px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .filter-option:hover {
            background-color: #f0f0f0;
        }
        .dark-mode .filter-option:hover {
            background-color: #4a4a4a;
        }
        .filter-option input[type="checkbox"] {
            margin-right: 10px;
            cursor: pointer;
        }
        .dropdown-menu hr {
            border: 0;
            border-top: 1px solid #eee;
            margin: 5px 0;
        }
        .dark-mode .dropdown-menu hr {
            border-top-color: #555;
        }

        /* --- Estilo de Gr√°fico (Apenas para garantir o tamanho) --- */
        .chart-container {
            height: 400px;
            width: 100%;
        }
        .chart-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        #event-details {
            position: sticky;
            top: 20px;
            right: 20px;
            width: 300px;
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            display: none;
            flex-shrink: 0;
        }
        .dark-mode #event-details {
             background-color: #2c2c2c;
             color: #f0f0f0;
        }
        #event-details h4 {
            margin-top: 0;
        }
        .main-content {
            display: flex;
            gap: 20px;
        }
        .chart-area {
            flex-grow: 1;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Monitor de Sa√∫de de Dispositivos</h1>
            <div class="theme-toggle">
                <span>Tema Escuro</span>
                <input type="checkbox" id="checkbox">
            </div>
        </header>

        <div class="card">
            <h2>Filtros e Dados</h2>
            <div id="statusContainer" style="margin-bottom: 20px;">
                <i id="statusIcon" class="fas"></i>
                <span id="statusMessage">Aguardando inicializa√ß√£o...</span>
            </div>

            <div class="filters-grid">
                
                <div class="form-group">
                    <label>1. Data do Arquivo (.csv):</label>
                    <input type="date" id="dateSelect">
                </div>
                <button id="btnBuscar" class="btn btn-primary" style="align-self: flex-end; width: 100%; max-width: 150px;">Buscar Data</button>

                <div class="form-group hostname-filter-group">
                    <label>2. M√°quina (Hostname):</label>
                    <div class="custom-dropdown-container">
                        <button class="dropdown-toggle" id="hostnameDropdownToggle" aria-expanded="false" onclick="toggleDropdown()">
                            <span id="selectedHostnameSummary">Todas as M√°quinas</span>
                            <i class="fas fa-chevron-down dropdown-arrow"></i>
                        </button>
                        <div class="dropdown-menu" id="hostnameDropdownMenu">
                            </div>
                    </div>
                </div>
                
                <div class="form-group" style="grid-column: 1 / 2; grid-row: 3 / 4;">
                    <label>3. Intervalo de Hor√°rio:</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="time" id="startTime" value="00:00">
                        <span>at√©</span>
                        <input type="time" id="endTime" value="23:59">
                    </div>
                </div>
                <button id="applyFiltersButton" class="btn btn-primary" style="align-self: flex-end; width: 100%; max-width: 150px; grid-column: 3 / 4; grid-row: 3 / 4;">Aplicar Filtros</button>
            </div>
        </div>

        <div class="main-content">
            <div class="chart-area">
                
                <div class="card">
                    <h3>üñ•Ô∏è 1. Carga Detalhada do Computador (CPU, RAM, Disco e Carga M√©dia)</h3>
                    <div class="chart-container">
                        <canvas id="maquinaChartCanvas"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üöÄ 2. Teste de Velocidade da Internet (Download, Upload, Lat√™ncia)</h3>
                    <div class="chart-container">
                        <canvas id="velocidadeChartCanvas"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üìû 3. Teste de Qualidade do Meet (Sa√∫de, Lat√™ncia, Jitter)</h3>
                    <p>Clique em um ponto do gr√°fico para ver os detalhes completos do evento.</p>
                    <div class="chart-container">
                        <canvas id="meetChartCanvas"></canvas>
                    </div>
                </div>
                
                <div class="card" id="chart-tracert">
                    <h3>üó∫Ô∏è 4. Tracert do Meet (Rota por Salto)</h3>
                    <div class="chart-container">
                        <canvas id="tracertChartCanvas"></canvas>
                    </div>
                </div>

            </div>
            
            <div class="card" id="event-details">
                <h4>Detalhes do Evento Selecionado</h4>
                <div id="event-content"></div>
            </div>
            
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>

    <script>
        // Insira o c√≥digo JavaScript fornecido no Bloco 3 aqui
    </script>

</body>
</html>
